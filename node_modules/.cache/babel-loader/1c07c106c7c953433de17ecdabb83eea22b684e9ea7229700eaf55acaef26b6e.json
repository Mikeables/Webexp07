{"ast":null,"code":"import React,{useState}from'react';import'./styles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Square(_ref){let{value,onSquareClick}=_ref;return/*#__PURE__*/_jsx(\"button\",{className:\"square\",onClick:onSquareClick,children:value});}function Board(_ref2){let{squares,onPlay,currentPlayer}=_ref2;function handleClick(x,y){if(squares[x][y]||calculateWinner(squares,x,y)){return;}const nextSquares=squares.map(row=>row.slice());nextSquares[x][y]=currentPlayer;onPlay(nextSquares,x,y);}const winner=calculateWinner(squares);let status;if(winner){status='Winner: '+winner;}else{status='Next player: '+currentPlayer;}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"status\",children:status}),squares.map((row,x)=>/*#__PURE__*/_jsx(\"div\",{className:\"board-row\",children:row.map((square,y)=>/*#__PURE__*/_jsx(Square,{value:square,onSquareClick:()=>handleClick(x,y)},y))},x))]});}function Game(){const[history,setHistory]=useState([Array(19).fill(null).map(()=>Array(19).fill(null))]);const[currentMove,setCurrentMove]=useState(0);const currentSquares=history[currentMove];const currentPlayer=currentMove%2===0?'X':'O';function handlePlay(nextSquares,x,y){const nextHistory=[...history.slice(0,currentMove+1),nextSquares];setHistory(nextHistory);setCurrentMove(nextHistory.length-1);}function jumpTo(nextMove){setCurrentMove(nextMove);}const moves=history.map((squares,move)=>{let description;if(move>0){description='Go to move #'+move;}else{description='Go to game start';}return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>jumpTo(move),children:description})},move);});return/*#__PURE__*/_jsxs(\"div\",{className:\"game\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"game-board\",children:/*#__PURE__*/_jsx(Board,{squares:currentSquares,onPlay:handlePlay,currentPlayer:currentPlayer})}),/*#__PURE__*/_jsx(\"div\",{className:\"game-info\",children:/*#__PURE__*/_jsx(\"ol\",{children:moves})})]});}function calculateWinner(squares){const directions=[[1,0],// 水平\n[0,1],// 垂直\n[1,1],// 斜对角（左上到右下）\n[1,-1]// 斜对角（右上到左下）\n];for(let x=0;x<squares.length;x++){for(let y=0;y<squares[x].length;y++){const player=squares[x][y];if(!player)continue;for(let[dx,dy]of directions){let count=1;// 向一个方向检查\nfor(let step=1;step<5;step++){const nx=x+dx*step;const ny=y+dy*step;if(nx>=0&&nx<squares.length&&ny>=0&&ny<squares[0].length&&squares[nx][ny]===player){count++;}else{break;}}// 向相反方向检查\nfor(let step=1;step<5;step++){const nx=x-dx*step;const ny=y-dy*step;if(nx>=0&&nx<squares.length&&ny>=0&&ny<squares[0].length&&squares[nx][ny]===player){count++;}else{break;}}if(count>=5){return player;}}}}return null;}export default Game;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Square","_ref","value","onSquareClick","className","onClick","children","Board","_ref2","squares","onPlay","currentPlayer","handleClick","x","y","calculateWinner","nextSquares","map","row","slice","winner","status","square","Game","history","setHistory","Array","fill","currentMove","setCurrentMove","currentSquares","handlePlay","nextHistory","length","jumpTo","nextMove","moves","move","description","directions","player","dx","dy","count","step","nx","ny"],"sources":["C:/Users/xyq03/Desktop/Web作业/Web实验05/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './styles.css';\n\nfunction Square({ value, onSquareClick }) {\n  return (\n    <button className=\"square\" onClick={onSquareClick}>\n      {value}\n    </button>\n  );\n}\n\nfunction Board({ squares, onPlay, currentPlayer }) {\n  function handleClick(x, y) {\n    if (squares[x][y] || calculateWinner(squares, x, y)) {\n      return;\n    }\n    const nextSquares = squares.map(row => row.slice());\n    nextSquares[x][y] = currentPlayer;\n    onPlay(nextSquares, x, y);\n  }\n\n  const winner = calculateWinner(squares);\n  let status;\n  if (winner) {\n    status = 'Winner: ' + winner;\n  } else {\n    status = 'Next player: ' + currentPlayer;\n  }\n\n  return (\n    <div>\n      <div className=\"status\">{status}</div>\n      {squares.map((row, x) => (\n        <div key={x} className=\"board-row\">\n          {row.map((square, y) => (\n            <Square key={y} value={square} onSquareClick={() => handleClick(x, y)} />\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction Game() {\n  const [history, setHistory] = useState([Array(19).fill(null).map(() => Array(19).fill(null))]);\n  const [currentMove, setCurrentMove] = useState(0);\n  const currentSquares = history[currentMove];\n  const currentPlayer = currentMove % 2 === 0 ? 'X' : 'O';\n\n  function handlePlay(nextSquares, x, y) {\n    const nextHistory = [...history.slice(0, currentMove + 1), nextSquares];\n    setHistory(nextHistory);\n    setCurrentMove(nextHistory.length - 1);\n  }\n\n  function jumpTo(nextMove) {\n    setCurrentMove(nextMove);\n  }\n\n  const moves = history.map((squares, move) => {\n    let description;\n    if (move > 0) {\n      description = 'Go to move #' + move;\n    } else {\n      description = 'Go to game start';\n    }\n    return (\n      <li key={move}>\n        <button onClick={() => jumpTo(move)}>{description}</button>\n      </li>\n    );\n  });\n\n  return (\n    <div className=\"game\">\n      <div className=\"game-board\">\n        <Board squares={currentSquares} onPlay={handlePlay} currentPlayer={currentPlayer} />\n      </div>\n      <div className=\"game-info\">\n        <ol>{moves}</ol>\n      </div>\n    </div>\n  );\n}\n\nfunction calculateWinner(squares) {\n  const directions = [\n    [1, 0], // 水平\n    [0, 1], // 垂直\n    [1, 1], // 斜对角（左上到右下）\n    [1, -1] // 斜对角（右上到左下）\n  ];\n\n  for (let x = 0; x < squares.length; x++) {\n    for (let y = 0; y < squares[x].length; y++) {\n      const player = squares[x][y];\n      if (!player) continue;\n\n      for (let [dx, dy] of directions) {\n        let count = 1;\n\n        // 向一个方向检查\n        for (let step = 1; step < 5; step++) {\n          const nx = x + dx * step;\n          const ny = y + dy * step;\n          if (nx >= 0 && nx < squares.length && ny >= 0 && ny < squares[0].length && squares[nx][ny] === player) {\n            count++;\n          } else {\n            break;\n          }\n        }\n\n        // 向相反方向检查\n        for (let step = 1; step < 5; step++) {\n          const nx = x - dx * step;\n          const ny = y - dy * step;\n          if (nx >= 0 && nx < squares.length && ny >= 0 && ny < squares[0].length && squares[nx][ny] === player) {\n            count++;\n          } else {\n            break;\n          }\n        }\n\n        if (count >= 5) {\n          return player;\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\nexport default Game;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}